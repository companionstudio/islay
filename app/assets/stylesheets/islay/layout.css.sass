@import compass/layout/stretching

$main-heading-height: 2.5em
$sub-heading-height: 2.5em
$footer-height: 2.5em
$body-margin-top: $main-heading-height + $sub-heading-height + 1em
$body-margin-left: 15em

body
  margin: $body-margin-top 1em 0 $body-margin-left + 1em

body.has-footer #content
  margin-bottom: $footer-height + 1em

/* -------------------------------------------------------------------------- */
/* MAIN CONTENT BLOCKS
/* -------------------------------------------------------------------------- */
#main-header
  border-bottom: 0.1em solid #CCC - 10
  background: #CCC
  width: 100%
  height: $main-heading-height
  position: fixed
  left: 0
  top: 0
  z-index: 3

#side-bar
  border-right: 0.1em solid #CCC - 10
  background: #CCC + 20
  width: $body-margin-left
  position: fixed
  left: 0
  top: $main-heading-height
  bottom: 0
  z-index: 2

#sub-header,
#footer
  background: #CCC + 20
  position: fixed
  left: $body-margin-left
  right: 0
  z-index: 1

#sub-header
  top: $main-heading-height
  height: $sub-heading-height

#footer
  height: $footer-height
  bottom: 0

#content
  width: 100%
  float: left

/* -------------------------------------------------------------------------- */
/* GRID
/* -------------------------------------------------------------------------- */
$column-count: 12
$gutter-count: $column-count - 1
$gutter-width: 1.5%
$column-width: (100% - $gutter-width * $gutter-count) / $column-count

#content .column
  width: 100%
  float: left

  &:last-child
    margin-right: 0

// Construct the classes for setting the widths of columns
$i: 0
@while $i < $column-count
  $j: $i
  $i: $i + 1
  #content .count-#{$i}
    width: $column-width * $i + $gutter-width * $j
    margin-right: $gutter-width
